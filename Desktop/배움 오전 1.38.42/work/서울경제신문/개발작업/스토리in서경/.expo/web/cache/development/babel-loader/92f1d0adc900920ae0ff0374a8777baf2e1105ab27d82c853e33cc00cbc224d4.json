{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport axios from \"axios\";\nimport { BIGKINDS_KEY } from \"@env\";\nvar BASE_URL = \"https://tools.kinds.or.kr\";\nexport var bigKindsAPI = axios.create({\n  baseURL: BASE_URL,\n  headers: {\n    \"Content-Type\": \"application/json\",\n    Accept: \"application/json\"\n  }\n});\nexport var SEOUL_ECONOMY_CODE = \"02100311\";\nbigKindsAPI.interceptors.request.use(function (config) {\n  if (config.data && !config.data.access_key) {\n    config.data = {\n      access_key: BIGKINDS_KEY,\n      argument: config.data.argument || config.data\n    };\n  }\n  return config;\n}, function (error) {\n  return Promise.reject(error);\n});\nexport var searchNewsByKeyword = function () {\n  var _ref = _asyncToGenerator(function* (keyword) {\n    var days = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 30;\n    try {\n      var today = new Date();\n      var fromDate = new Date();\n      fromDate.setDate(today.getDate() - days);\n      var fromDateStr = formatDateForAPI(fromDate);\n      var toDateStr = formatDateForAPI(today);\n      var response = yield bigKindsAPI.post(\"/search/news\", {\n        argument: {\n          query: keyword,\n          published_at: {\n            from: fromDateStr,\n            until: toDateStr\n          },\n          provider: [SEOUL_ECONOMY_CODE],\n          sort: {\n            date: \"desc\"\n          },\n          return_from: 0,\n          return_size: 20,\n          fields: [\"title\", \"content\", \"published_at\", \"provider_news_id\", \"images\", \"provider_link_page\", \"provider\"]\n        }\n      });\n      if (response.data && response.data.documents) {\n        return response.data.documents.map(function (item) {\n          return {\n            id: item.news_id || item._id,\n            title: item.title,\n            description: item.content ? item.content.substring(0, 150) + \"...\" : \"\",\n            date: formatReadableDate(item.published_at),\n            url: item.provider_link_page,\n            imageUrl: item.images && item.images.length > 0 ? item.images[0] : null,\n            source: \"서울경제\"\n          };\n        });\n      }\n      return [];\n    } catch (error) {\n      console.error(\"뉴스 검색 중 오류 발생:\", error);\n      throw error;\n    }\n  });\n  return function searchNewsByKeyword(_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\nexport var getNewsDetail = function () {\n  var _ref2 = _asyncToGenerator(function* (newsId) {\n    try {\n      var response = yield bigKindsAPI.post(\"/search/news\", {\n        argument: {\n          news_ids: [newsId],\n          fields: [\"title\", \"content\", \"published_at\", \"provider\", \"byline\", \"category\", \"images\", \"provider_link_page\"]\n        }\n      });\n      if (response.data && response.data.return_object && response.data.return_object.documents && response.data.return_object.documents.length > 0) {\n        var detail = response.data.return_object.documents[0];\n        return {\n          id: newsId,\n          title: detail.title,\n          content: detail.content,\n          date: formatReadableDate(detail.published_at),\n          url: detail.provider_link_page,\n          imageUrl: detail.images && detail.images.length > 0 ? detail.images[0] : null,\n          source: detail.provider || \"서울경제\",\n          author: detail.byline || \"\",\n          category: detail.category || []\n        };\n      }\n      throw new Error(\"뉴스 상세 정보를 찾을 수 없습니다.\");\n    } catch (error) {\n      console.error(\"뉴스 상세 정보 조회 중 오류 발생:\", error);\n      throw error;\n    }\n  });\n  return function getNewsDetail(_x2) {\n    return _ref2.apply(this, arguments);\n  };\n}();\nexport var getTodayIssueNews = function () {\n  var _ref3 = _asyncToGenerator(function* () {\n    var size = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 5;\n    var dateStr = arguments.length > 1 ? arguments[1] : undefined;\n    try {\n      var targetDate;\n      if (dateStr) {\n        targetDate = dateStr;\n      } else {\n        var today = new Date();\n        targetDate = formatDateForAPI(today, false);\n      }\n      console.log(`오늘의 이슈 API 호출: ${targetDate}`);\n      var response = yield bigKindsAPI.post(\"/issue_ranking\", {\n        argument: {\n          date: targetDate,\n          provider: [\"서울경제\"],\n          size: size\n        }\n      });\n      console.log(\"API 응답:\", JSON.stringify(response.data, null, 2));\n      if (!response.data.return_object || !response.data.return_object.topics || response.data.return_object.topics.length === 0) {\n        console.log(`${targetDate} 이슈 없음`);\n        return [];\n      }\n      var newsPromises = response.data.return_object.topics.map(function () {\n        var _ref4 = _asyncToGenerator(function* (issue) {\n          try {\n            var keyword = issue.topic_keyword || issue.topic;\n            console.log(`이슈 키워드: ${keyword}`);\n            var newsResponse = yield bigKindsAPI.post(\"/search/news\", {\n              argument: {\n                query: keyword,\n                published_at: {\n                  from: formatDateForAPI(new Date(new Date(targetDate).getTime() - 7 * 24 * 60 * 60 * 1000)),\n                  until: formatDateForAPI(new Date(new Date(targetDate).getTime() + 24 * 60 * 60 * 1000))\n                },\n                provider: [SEOUL_ECONOMY_CODE],\n                return_from: 0,\n                return_size: 1,\n                fields: [\"title\", \"content\", \"published_at\", \"provider_news_id\", \"images\", \"provider_link_page\", \"provider\"]\n              }\n            });\n            if (newsResponse.data && newsResponse.data.return_object && newsResponse.data.return_object.documents && newsResponse.data.return_object.documents.length > 0) {\n              var news = newsResponse.data.return_object.documents[0];\n              return {\n                id: news.news_id || news._id,\n                title: news.title,\n                description: news.content ? news.content.substring(0, 150) + \"...\" : \"\",\n                date: formatReadableDate(news.published_at),\n                url: news.provider_link_page,\n                imageUrl: news.images && news.images.length > 0 ? news.images[0] : null,\n                source: news.provider || \"서울경제\"\n              };\n            }\n            if (SEOUL_ECONOMY_CODE) {\n              console.log(\"서울경제 뉴스 없음, 모든 언론사에서 검색\");\n              var allNewsResponse = yield bigKindsAPI.post(\"/search/news\", {\n                argument: {\n                  query: keyword,\n                  published_at: {\n                    from: formatDateForAPI(new Date(new Date(targetDate).getTime() - 7 * 24 * 60 * 60 * 1000)),\n                    until: formatDateForAPI(new Date(new Date(targetDate).getTime() + 24 * 60 * 60 * 1000))\n                  },\n                  return_from: 0,\n                  return_size: 1,\n                  fields: [\"title\", \"content\", \"published_at\", \"provider_news_id\", \"images\", \"provider_link_page\", \"provider\"]\n                }\n              });\n              if (allNewsResponse.data && allNewsResponse.data.return_object && allNewsResponse.data.return_object.documents && allNewsResponse.data.return_object.documents.length > 0) {\n                var _news = allNewsResponse.data.return_object.documents[0];\n                return {\n                  id: _news.news_id || _news._id,\n                  title: _news.title,\n                  description: _news.content ? _news.content.substring(0, 150) + \"...\" : \"\",\n                  date: formatReadableDate(_news.published_at),\n                  url: _news.provider_link_page,\n                  imageUrl: _news.images && _news.images.length > 0 ? _news.images[0] : null,\n                  source: _news.provider || \"뉴스\"\n                };\n              }\n            }\n            console.log(\"이슈 관련 뉴스 없음\");\n            return null;\n          } catch (error) {\n            console.error(\"이슈 관련 뉴스 검색 중 오류:\", error);\n            return null;\n          }\n        });\n        return function (_x3) {\n          return _ref4.apply(this, arguments);\n        };\n      }());\n      var newsResults = yield Promise.all(newsPromises);\n      var filteredResults = newsResults.filter(function (news) {\n        return news !== null;\n      });\n      console.log(`최종 이슈 뉴스 개수: ${filteredResults.length}`);\n      return filteredResults;\n    } catch (error) {\n      console.error(\"오늘의 이슈 조회 중 오류 발생:\", error);\n      throw error;\n    }\n  });\n  return function getTodayIssueNews() {\n    return _ref3.apply(this, arguments);\n  };\n}();\nexport var getPopularKeywords = function () {\n  var _ref5 = _asyncToGenerator(function* () {\n    var size = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 10;\n    try {\n      var today = new Date();\n      var yesterday = new Date(today);\n      yesterday.setDate(today.getDate() - 1);\n      var response = yield bigKindsAPI.post(\"/query_rank\", {\n        argument: {\n          from: formatDateForAPI(yesterday),\n          until: formatDateForAPI(today),\n          offset: size\n        }\n      });\n      if (response.data.return_object && response.data.return_object.queries) {\n        return response.data.return_object.queries.sort(function (a, b) {\n          return b.count - a.count;\n        }).slice(0, size).map(function (item) {\n          return item.query;\n        });\n      }\n      return [];\n    } catch (error) {\n      console.error(\"인기 검색어 조회 중 오류 발생:\", error);\n      throw error;\n    }\n  });\n  return function getPopularKeywords() {\n    return _ref5.apply(this, arguments);\n  };\n}();\nexport var getRelatedKeywords = function () {\n  var _ref6 = _asyncToGenerator(function* (keyword) {\n    var size = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 10;\n    try {\n      var today = new Date();\n      var lastMonth = new Date(today);\n      lastMonth.setMonth(today.getMonth() - 1);\n      var response = yield bigKindsAPI.post(\"/word_cloud\", {\n        argument: {\n          query: keyword,\n          published_at: {\n            from: formatDateForAPI(lastMonth),\n            until: formatDateForAPI(today)\n          },\n          provider: [SEOUL_ECONOMY_CODE]\n        }\n      });\n      if (response.data.return_object && response.data.return_object.nodes) {\n        return response.data.return_object.nodes.sort(function (a, b) {\n          return b.weight - a.weight;\n        }).slice(0, size).map(function (node) {\n          return {\n            name: node.name,\n            weight: node.weight\n          };\n        });\n      }\n      return [];\n    } catch (error) {\n      console.error(\"연관어 분석 중 오류 발생:\", error);\n      throw error;\n    }\n  });\n  return function getRelatedKeywords(_x4) {\n    return _ref6.apply(this, arguments);\n  };\n}();\nexport var getKeywordTimeline = function () {\n  var _ref7 = _asyncToGenerator(function* (keyword) {\n    var size = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 30;\n    try {\n      var newsItems = yield searchNewsByKeyword(keyword, 30);\n      return newsItems.sort(function (a, b) {\n        return new Date(b.date).getTime() - new Date(a.date).getTime();\n      }).slice(0, size);\n    } catch (error) {\n      console.error(\"키워드 타임라인 조회 중 오류 발생:\", error);\n      throw error;\n    }\n  });\n  return function getKeywordTimeline(_x5) {\n    return _ref7.apply(this, arguments);\n  };\n}();\nexport var getTodayKeywords = function () {\n  var _ref8 = _asyncToGenerator(function* () {\n    try {\n      var response = yield bigKindsAPI.post(\"/today_category_keyword\", {\n        argument: {}\n      });\n      if (response.data && response.data.return_object) {\n        return {\n          date: response.data.return_object.date,\n          categories: response.data.return_object.cate_ratio || [],\n          keywords: response.data.return_object.cate_keyword || []\n        };\n      }\n      return {\n        date: \"\",\n        categories: [],\n        keywords: []\n      };\n    } catch (error) {\n      console.error(\"오늘의 키워드 조회 중 오류 발생:\", error);\n      throw error;\n    }\n  });\n  return function getTodayKeywords() {\n    return _ref8.apply(this, arguments);\n  };\n}();\nexport var getKeywordTrend = function () {\n  var _ref9 = _asyncToGenerator(function* (keyword) {\n    var interval = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"month\";\n    var fromDate = arguments.length > 2 ? arguments[2] : undefined;\n    var toDate = arguments.length > 3 ? arguments[3] : undefined;\n    try {\n      var endDate = toDate || new Date();\n      var startDate = fromDate || new Date(endDate);\n      if (!fromDate) {\n        startDate.setFullYear(startDate.getFullYear() - 1);\n      }\n      var response = yield bigKindsAPI.post(\"/time_line\", {\n        argument: {\n          query: keyword,\n          published_at: {\n            from: formatDateForAPI(startDate),\n            until: formatDateForAPI(endDate)\n          },\n          provider: [SEOUL_ECONOMY_CODE],\n          interval: interval,\n          normalize: \"false\"\n        }\n      });\n      if (response.data && response.data.return_object) {\n        return {\n          totalHits: response.data.return_object.total_hits,\n          timeline: response.data.return_object.time_line || []\n        };\n      }\n      return {\n        totalHits: 0,\n        timeline: []\n      };\n    } catch (error) {\n      console.error(\"키워드 트렌드 조회 중 오류 발생:\", error);\n      throw error;\n    }\n  });\n  return function getKeywordTrend(_x6) {\n    return _ref9.apply(this, arguments);\n  };\n}();\nexport var formatDateForAPI = function formatDateForAPI(date) {\n  var asYYYYMMDD = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n  var year = date.getFullYear();\n  var month = String(date.getMonth() + 1).padStart(2, \"0\");\n  var day = String(date.getDate()).padStart(2, \"0\");\n  if (asYYYYMMDD) {\n    return `${year}${month}${day}`;\n  }\n  return `${year}-${month}-${day}`;\n};\nexport var formatReadableDate = function formatReadableDate(dateString) {\n  if (!dateString) return \"\";\n  var date;\n  if (dateString.match(/^\\d{8}$/)) {\n    var _year = dateString.substring(0, 4);\n    var _month = dateString.substring(4, 6);\n    var _day = dateString.substring(6, 8);\n    date = new Date(`${_year}-${_month}-${_day}`);\n  } else {\n    date = new Date(dateString);\n  }\n  if (isNaN(date.getTime())) {\n    return dateString;\n  }\n  var year = date.getFullYear();\n  var month = String(date.getMonth() + 1).padStart(2, \"0\");\n  var day = String(date.getDate()).padStart(2, \"0\");\n  return `${year}-${month}-${day}`;\n};","map":{"version":3,"names":["axios","BIGKINDS_KEY","BASE_URL","bigKindsAPI","create","baseURL","headers","Accept","SEOUL_ECONOMY_CODE","interceptors","request","use","config","data","access_key","argument","error","Promise","reject","searchNewsByKeyword","_ref","_asyncToGenerator","keyword","days","arguments","length","undefined","today","Date","fromDate","setDate","getDate","fromDateStr","formatDateForAPI","toDateStr","response","post","query","published_at","from","until","provider","sort","date","return_from","return_size","fields","documents","map","item","id","news_id","_id","title","description","content","substring","formatReadableDate","url","provider_link_page","imageUrl","images","source","console","_x","apply","getNewsDetail","_ref2","newsId","news_ids","return_object","detail","author","byline","category","Error","_x2","getTodayIssueNews","_ref3","size","dateStr","targetDate","log","JSON","stringify","topics","newsPromises","_ref4","issue","topic_keyword","topic","newsResponse","getTime","news","allNewsResponse","_x3","newsResults","all","filteredResults","filter","getPopularKeywords","_ref5","yesterday","offset","queries","a","b","count","slice","getRelatedKeywords","_ref6","lastMonth","setMonth","getMonth","nodes","weight","node","name","_x4","getKeywordTimeline","_ref7","newsItems","_x5","getTodayKeywords","_ref8","categories","cate_ratio","keywords","cate_keyword","getKeywordTrend","_ref9","interval","toDate","endDate","startDate","setFullYear","getFullYear","normalize","totalHits","total_hits","timeline","time_line","_x6","asYYYYMMDD","year","month","String","padStart","day","dateString","match","isNaN"],"sources":["/Users/yeong-gwang/Desktop/배움 오전 1.38.42/work/서울경제신문/개발작업/스토리in서경/src/services/newsService.ts"],"sourcesContent":["import axios from \"axios\";\nimport { BIGKINDS_KEY } from \"@env\";\n\n// BigKinds API 기본 URL\nconst BASE_URL = \"https://tools.kinds.or.kr\";\n\n// API 클라이언트 설정\nexport const bigKindsAPI = axios.create({\n  baseURL: BASE_URL,\n  headers: {\n    \"Content-Type\": \"application/json\",\n    Accept: \"application/json\",\n  },\n});\n\n// 서울경제신문 언론사 코드\nexport const SEOUL_ECONOMY_CODE = \"02100311\";\n\n// 요청 인터셉터 설정 - API 키 추가\nbigKindsAPI.interceptors.request.use(\n  (config) => {\n    // 요청 구조에 access_key 추가\n    if (config.data && !config.data.access_key) {\n      config.data = {\n        access_key: BIGKINDS_KEY,\n        argument: config.data.argument || config.data,\n      };\n    }\n    return config;\n  },\n  (error) => {\n    return Promise.reject(error);\n  }\n);\n\n// 뉴스 검색 결과 인터페이스\nexport interface NewsItem {\n  id: string;\n  title: string;\n  description: string;\n  date: string;\n  url: string;\n  imageUrl?: string;\n  source?: string;\n}\n\n// 뉴스 상세 정보 인터페이스\nexport interface NewsDetail {\n  id: string;\n  title: string;\n  content: string;\n  date: string;\n  url: string;\n  imageUrl?: string;\n  source?: string;\n  author?: string;\n  category?: string[];\n}\n\n/**\n * 키워드로 뉴스 검색\n * @param keyword 검색 키워드\n * @returns 뉴스 아이템 배열\n */\nexport const searchNewsByKeyword = async (\n  keyword: string,\n  days: number = 30\n): Promise<NewsItem[]> => {\n  try {\n    // 날짜 범위 계산\n    const today = new Date();\n    const fromDate = new Date();\n    fromDate.setDate(today.getDate() - days);\n\n    const fromDateStr = formatDateForAPI(fromDate);\n    const toDateStr = formatDateForAPI(today);\n\n    const response = await bigKindsAPI.post(\"/search/news\", {\n      argument: {\n        query: keyword,\n        published_at: {\n          from: fromDateStr,\n          until: toDateStr,\n        },\n        provider: [SEOUL_ECONOMY_CODE], // 서울경제 언론사만 검색\n        sort: { date: \"desc\" },\n        return_from: 0,\n        return_size: 20,\n        fields: [\n          \"title\",\n          \"content\",\n          \"published_at\",\n          \"provider_news_id\",\n          \"images\",\n          \"provider_link_page\",\n          \"provider\",\n        ],\n      },\n    });\n\n    // 응답 데이터 확인 및 매핑\n    if (response.data && response.data.documents) {\n      return response.data.documents.map((item: any) => ({\n        id: item.news_id || item._id,\n        title: item.title,\n        description: item.content ? item.content.substring(0, 150) + \"...\" : \"\",\n        date: formatReadableDate(item.published_at),\n        url: item.provider_link_page,\n        imageUrl: item.images && item.images.length > 0 ? item.images[0] : null,\n        source: \"서울경제\",\n      }));\n    }\n\n    return [];\n  } catch (error) {\n    console.error(\"뉴스 검색 중 오류 발생:\", error);\n    throw error;\n  }\n};\n\n/**\n * 뉴스 상세 정보 조회\n * @param newsId 뉴스 ID\n * @returns 뉴스 상세 정보\n */\nexport const getNewsDetail = async (newsId: string): Promise<NewsDetail> => {\n  try {\n    const response = await bigKindsAPI.post(\"/search/news\", {\n      argument: {\n        news_ids: [newsId],\n        fields: [\n          \"title\",\n          \"content\",\n          \"published_at\",\n          \"provider\",\n          \"byline\",\n          \"category\",\n          \"images\",\n          \"provider_link_page\",\n        ],\n      },\n    });\n\n    // 응답 구조가 다르므로 적절히 처리\n    if (\n      response.data &&\n      response.data.return_object &&\n      response.data.return_object.documents &&\n      response.data.return_object.documents.length > 0\n    ) {\n      const detail = response.data.return_object.documents[0];\n      return {\n        id: newsId,\n        title: detail.title,\n        content: detail.content,\n        date: formatReadableDate(detail.published_at),\n        url: detail.provider_link_page,\n        imageUrl:\n          detail.images && detail.images.length > 0 ? detail.images[0] : null,\n        source: detail.provider || \"서울경제\",\n        author: detail.byline || \"\",\n        category: detail.category || [],\n      };\n    }\n\n    throw new Error(\"뉴스 상세 정보를 찾을 수 없습니다.\");\n  } catch (error) {\n    console.error(\"뉴스 상세 정보 조회 중 오류 발생:\", error);\n    throw error;\n  }\n};\n\n/**\n * 오늘의 이슈 뉴스 가져오기\n * @param size 가져올 이슈 수\n * @param dateStr 특정 날짜 (YYYY-MM-DD 형식, 기본값은 오늘)\n * @returns 뉴스 아이템 배열\n */\nexport const getTodayIssueNews = async (\n  size: number = 5,\n  dateStr?: string\n): Promise<NewsItem[]> => {\n  try {\n    // 날짜 설정 (지정된 날짜 또는 오늘)\n    let targetDate: string;\n\n    if (dateStr) {\n      targetDate = dateStr; // 이미 YYYY-MM-DD 형식\n    } else {\n      // 현재 날짜를 YYYY-MM-DD 형식으로 변환\n      const today = new Date();\n      targetDate = formatDateForAPI(today, false);\n    }\n\n    console.log(`오늘의 이슈 API 호출: ${targetDate}`);\n\n    // 오늘의 이슈 요청 - 서울경제 언론사 (코드가 아닌 이름으로 전달)\n    const response = await bigKindsAPI.post(\"/issue_ranking\", {\n      argument: {\n        date: targetDate,\n        provider: [\"서울경제\"],\n        size: size,\n      },\n    });\n\n    console.log(\"API 응답:\", JSON.stringify(response.data, null, 2));\n\n    // 이슈가 있는지 확인\n    if (\n      !response.data.return_object ||\n      !response.data.return_object.topics ||\n      response.data.return_object.topics.length === 0\n    ) {\n      console.log(`${targetDate} 이슈 없음`);\n      return [];\n    }\n\n    // 각 이슈에 대한 첫 번째 뉴스 가져오기\n    const newsPromises = response.data.return_object.topics.map(\n      async (issue: any) => {\n        try {\n          // 이슈 관련 키워드로 뉴스 검색\n          const keyword = issue.topic_keyword || issue.topic;\n          console.log(`이슈 키워드: ${keyword}`);\n\n          // 뉴스 검색 시에는 서울경제 코드 사용\n          const newsResponse = await bigKindsAPI.post(\"/search/news\", {\n            argument: {\n              query: keyword,\n              published_at: {\n                // 해당 날짜 전후 7일 범위로 검색\n                from: formatDateForAPI(\n                  new Date(\n                    new Date(targetDate).getTime() - 7 * 24 * 60 * 60 * 1000\n                  )\n                ),\n                until: formatDateForAPI(\n                  new Date(new Date(targetDate).getTime() + 24 * 60 * 60 * 1000)\n                ),\n              },\n              provider: [SEOUL_ECONOMY_CODE],\n              return_from: 0,\n              return_size: 1,\n              fields: [\n                \"title\",\n                \"content\",\n                \"published_at\",\n                \"provider_news_id\",\n                \"images\",\n                \"provider_link_page\",\n                \"provider\",\n              ],\n            },\n          });\n\n          // 응답에서 documents 확인\n          if (\n            newsResponse.data &&\n            newsResponse.data.return_object &&\n            newsResponse.data.return_object.documents &&\n            newsResponse.data.return_object.documents.length > 0\n          ) {\n            const news = newsResponse.data.return_object.documents[0];\n            return {\n              id: news.news_id || news._id,\n              title: news.title,\n              description: news.content\n                ? news.content.substring(0, 150) + \"...\"\n                : \"\",\n              date: formatReadableDate(news.published_at),\n              url: news.provider_link_page,\n              imageUrl:\n                news.images && news.images.length > 0 ? news.images[0] : null,\n              source: news.provider || \"서울경제\",\n            };\n          }\n\n          // 뉴스 검색 시 서울경제에서 결과가 없으면 모든 언론사에서 검색 시도\n          if (SEOUL_ECONOMY_CODE) {\n            console.log(\"서울경제 뉴스 없음, 모든 언론사에서 검색\");\n            const allNewsResponse = await bigKindsAPI.post(\"/search/news\", {\n              argument: {\n                query: keyword,\n                published_at: {\n                  from: formatDateForAPI(\n                    new Date(\n                      new Date(targetDate).getTime() - 7 * 24 * 60 * 60 * 1000\n                    )\n                  ),\n                  until: formatDateForAPI(\n                    new Date(\n                      new Date(targetDate).getTime() + 24 * 60 * 60 * 1000\n                    )\n                  ),\n                },\n                return_from: 0,\n                return_size: 1,\n                fields: [\n                  \"title\",\n                  \"content\",\n                  \"published_at\",\n                  \"provider_news_id\",\n                  \"images\",\n                  \"provider_link_page\",\n                  \"provider\",\n                ],\n              },\n            });\n\n            if (\n              allNewsResponse.data &&\n              allNewsResponse.data.return_object &&\n              allNewsResponse.data.return_object.documents &&\n              allNewsResponse.data.return_object.documents.length > 0\n            ) {\n              const news = allNewsResponse.data.return_object.documents[0];\n              return {\n                id: news.news_id || news._id,\n                title: news.title,\n                description: news.content\n                  ? news.content.substring(0, 150) + \"...\"\n                  : \"\",\n                date: formatReadableDate(news.published_at),\n                url: news.provider_link_page,\n                imageUrl:\n                  news.images && news.images.length > 0 ? news.images[0] : null,\n                source: news.provider || \"뉴스\",\n              };\n            }\n          }\n\n          console.log(\"이슈 관련 뉴스 없음\");\n          return null;\n        } catch (error) {\n          console.error(\"이슈 관련 뉴스 검색 중 오류:\", error);\n          return null;\n        }\n      }\n    );\n\n    const newsResults = await Promise.all(newsPromises);\n    const filteredResults = newsResults.filter(\n      (news): news is NewsItem => news !== null\n    );\n    console.log(`최종 이슈 뉴스 개수: ${filteredResults.length}`);\n    return filteredResults;\n  } catch (error) {\n    console.error(\"오늘의 이슈 조회 중 오류 발생:\", error);\n    throw error;\n  }\n};\n\n/**\n * 인기 검색어 가져오기\n * @param size 가져올 검색어 수\n * @returns 인기 검색어 배열\n */\nexport const getPopularKeywords = async (\n  size: number = 10\n): Promise<string[]> => {\n  try {\n    const today = new Date();\n    const yesterday = new Date(today);\n    yesterday.setDate(today.getDate() - 1);\n\n    const response = await bigKindsAPI.post(\"/query_rank\", {\n      argument: {\n        from: formatDateForAPI(yesterday),\n        until: formatDateForAPI(today),\n        offset: size,\n      },\n    });\n\n    if (response.data.return_object && response.data.return_object.queries) {\n      return response.data.return_object.queries\n        .sort((a: any, b: any) => b.count - a.count)\n        .slice(0, size)\n        .map((item: any) => item.query);\n    }\n\n    return [];\n  } catch (error) {\n    console.error(\"인기 검색어 조회 중 오류 발생:\", error);\n    throw error;\n  }\n};\n\n/**\n * 연관어 분석 가져오기\n * @param keyword 검색 키워드\n * @param size 가져올 연관어 수\n * @returns 연관어 배열 {name: string, weight: number}\n */\nexport const getRelatedKeywords = async (\n  keyword: string,\n  size: number = 10\n) => {\n  try {\n    const today = new Date();\n    const lastMonth = new Date(today);\n    lastMonth.setMonth(today.getMonth() - 1);\n\n    const response = await bigKindsAPI.post(\"/word_cloud\", {\n      argument: {\n        query: keyword,\n        published_at: {\n          from: formatDateForAPI(lastMonth),\n          until: formatDateForAPI(today),\n        },\n        provider: [SEOUL_ECONOMY_CODE],\n      },\n    });\n\n    if (response.data.return_object && response.data.return_object.nodes) {\n      return response.data.return_object.nodes\n        .sort((a: any, b: any) => b.weight - a.weight)\n        .slice(0, size)\n        .map((node: any) => ({\n          name: node.name,\n          weight: node.weight,\n        }));\n    }\n\n    return [];\n  } catch (error) {\n    console.error(\"연관어 분석 중 오류 발생:\", error);\n    throw error;\n  }\n};\n\n/**\n * 키워드로 타임라인 뉴스 가져오기\n * @param keyword 검색할 키워드\n * @param size 가져올 뉴스 개수\n * @returns 타임라인으로 정렬된 뉴스 아이템 배열\n */\nexport const getKeywordTimeline = async (\n  keyword: string,\n  size: number = 30\n): Promise<NewsItem[]> => {\n  try {\n    // 최근 30일의 뉴스를 가져옴\n    const newsItems = await searchNewsByKeyword(keyword, 30);\n\n    // 날짜 기준으로 정렬\n    return newsItems\n      .sort((a, b) => new Date(b.date).getTime() - new Date(a.date).getTime())\n      .slice(0, size);\n  } catch (error) {\n    console.error(\"키워드 타임라인 조회 중 오류 발생:\", error);\n    throw error;\n  }\n};\n\n/**\n * 오늘의 키워드(분야별 키워드) 가져오기\n * @returns 분야별 인기 키워드 목록\n */\nexport const getTodayKeywords = async () => {\n  try {\n    const response = await bigKindsAPI.post(\"/today_category_keyword\", {\n      argument: {},\n    });\n\n    if (response.data && response.data.return_object) {\n      // 키워드와 카테고리 데이터 반환\n      return {\n        date: response.data.return_object.date,\n        categories: response.data.return_object.cate_ratio || [],\n        keywords: response.data.return_object.cate_keyword || [],\n      };\n    }\n\n    return {\n      date: \"\",\n      categories: [],\n      keywords: [],\n    };\n  } catch (error) {\n    console.error(\"오늘의 키워드 조회 중 오류 발생:\", error);\n    throw error;\n  }\n};\n\n/**\n * 키워드 트렌드 정보 가져오기\n * @param keyword 검색 키워드\n * @param interval 집계 간격 (day, month, year)\n * @param fromDate 시작 날짜\n * @param toDate 종료 날짜\n * @returns 기간별 키워드 언급 추이\n */\nexport const getKeywordTrend = async (\n  keyword: string,\n  interval: \"day\" | \"month\" | \"year\" = \"month\",\n  fromDate?: Date,\n  toDate?: Date\n) => {\n  try {\n    // 날짜 범위 설정\n    const endDate = toDate || new Date();\n    const startDate = fromDate || new Date(endDate);\n\n    if (!fromDate) {\n      // 기본값으로 1년 전\n      startDate.setFullYear(startDate.getFullYear() - 1);\n    }\n\n    const response = await bigKindsAPI.post(\"/time_line\", {\n      argument: {\n        query: keyword,\n        published_at: {\n          from: formatDateForAPI(startDate),\n          until: formatDateForAPI(endDate),\n        },\n        provider: [SEOUL_ECONOMY_CODE],\n        interval: interval,\n        normalize: \"false\",\n      },\n    });\n\n    if (response.data && response.data.return_object) {\n      return {\n        totalHits: response.data.return_object.total_hits,\n        timeline: response.data.return_object.time_line || [],\n      };\n    }\n\n    return {\n      totalHits: 0,\n      timeline: [],\n    };\n  } catch (error) {\n    console.error(\"키워드 트렌드 조회 중 오류 발생:\", error);\n    throw error;\n  }\n};\n\n// 날짜 포맷 유틸리티 (YYYY-MM-DD 형식)\nexport const formatDateForAPI = (\n  date: Date,\n  asYYYYMMDD: boolean = false\n): string => {\n  const year = date.getFullYear();\n  const month = String(date.getMonth() + 1).padStart(2, \"0\");\n  const day = String(date.getDate()).padStart(2, \"0\");\n\n  if (asYYYYMMDD) {\n    return `${year}${month}${day}`;\n  }\n\n  return `${year}-${month}-${day}`;\n};\n\n// 읽기 쉬운 날짜 형식으로 변환\nexport const formatReadableDate = (dateString: string): string => {\n  if (!dateString) return \"\";\n\n  let date: Date;\n\n  // 다양한 날짜 형식 처리\n  if (dateString.match(/^\\d{8}$/)) {\n    // YYYYMMDD 형식\n    const year = dateString.substring(0, 4);\n    const month = dateString.substring(4, 6);\n    const day = dateString.substring(6, 8);\n    date = new Date(`${year}-${month}-${day}`);\n  } else {\n    // ISO 또는 다른 형식\n    date = new Date(dateString);\n  }\n\n  // 유효하지 않은 날짜\n  if (isNaN(date.getTime())) {\n    return dateString;\n  }\n\n  const year = date.getFullYear();\n  const month = String(date.getMonth() + 1).padStart(2, \"0\");\n  const day = String(date.getDate()).padStart(2, \"0\");\n\n  return `${year}-${month}-${day}`;\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}